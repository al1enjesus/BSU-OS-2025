## Чем процесс отличается от программы?
- **Программа** — это файл с инструкциями (например, бинарь ELF).
- **Процесс** — выполняющийся экземпляр программы с памятью, PID и контекстом.

---

## Что будет, если вызвать fork() без wait()?
- `fork()` создаёт дочерний процесс.
- Если не вызвать `wait()`, то:
  - Дочерний процесс после завершения станет **зомби**.
  - Если родитель завершится раньше — процесс станет **сиротой**, его "усыновит" `init/systemd`.

---

## Как система хранит информацию о процессах?
- В структуре **task_struct** в ядре.
- Доступ пользователю:
  - `/proc/<pid>/` (виртуальная ФС).
  - `ps`, `top`, `htop`.

---

## Что делает exec()?
- Заменяет текущий процесс новой программой.
- PID сохраняется, но код и данные подменяются.
- Используется после `fork()`, чтобы загрузить другую программу.

---

## Почему в /proc нет «настоящих» файлов?
- `/proc` — виртуальная ФС, данные генерируются ядром.
- Файлы не хранятся на диске, а отражают текущее состояние.

---

## Интерпретация полей `top`
- **%CPU** — процент CPU процесса.
- **%MEM** — процент ОЗУ процесса.
- **VIRT** — виртуальная память.
- **RES** — реально используемая физическая память.
- **SHR** — разделяемая память.
- **TIME+** — суммарное время CPU.

---

## Почему %CPU может быть > 100%?
- На многопроцессорных системах максимум = 100% × число ядер.
- Потоки одного процесса могут использовать несколько ядер.

---

## %CPU vs Load Average
- **%CPU** — текущее использование CPU.
- **Load average** — среднее число процессов в очереди (за 1, 5, 15 минут).

---

## Строка `Cpu(s)` в top
```
%Cpu(s): 10.0 us, 2.0 sy, 0.0 ni, 85.0 id, 3.0 wa, 0.0 hi, 0.0 si, 0.0 st
```
- **us** — user space.
- **sy** — kernel space.
- **ni** — процессы с nice.
- **id** — idle (простой).
- **wa** — ожидание I/O.
- **hi** — аппаратные прерывания.
- **si** — софтверные прерывания.
- **st** — украденное время гипервизором.

---

## IO‑нагрузка vs CPU‑нагрузка
- **CPU‑нагрузка** — процесс считает.
- **IO‑нагрузка** — процесс ждёт диск/сеть.
- Смотреть:
  - `pidstat -d`
  - `iotop`
  - `/proc/<pid>/io`

---

## Nice и приоритеты
- **nice**: от -20 до +19.
  - Меньше — выше приоритет.
  - Больше — процесс "уступает".
- Влияет на планировщик CFS.

---

## Потоки vs процессы
- **Процесс** — отдельная память.
- **Поток** — разделяет память процесса.
- Смотреть:
  - `ps -eLf`
  - `ps -T -p <pid>`
  - `top -H`

---

## Зомби и сироты
- **Зомби** — процесс завершился, но родитель не вызвал `wait()`.
- **Сирота** — процесс остался без родителя, усыновляется `init/systemd`.
- Зомби удаляются, когда родитель или `init` вызывает `wait()`.

---
