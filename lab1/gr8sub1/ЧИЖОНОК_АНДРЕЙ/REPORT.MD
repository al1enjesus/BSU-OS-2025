Краткий отчет по лабораторной работе 1: Анализ логов в Bash

Выполненные задания:

Задание А: Частотный анализ слов в syslog (TOP-5)

Цель: Определить 5 самых частых слов в системном логе с нормализацией регистра.

Конвейер написанный для данного задания:

cat /var/log/syslog \
  | tr -cs '[:alnum:]' '\n' \
  | tr '[:upper:]' '[:lower:]' \
  | sort \
  | uniq -c \
  | sort -nr \
  | head -n 5
  
Где: 

1. cat /var/log/syslog - читает содержимое системного лога.
2. tr -cs '[:alnum:]' '\n' -разделяет текст на слова, заменяя все не буквенные символы на перенос строки.
3. tr '[:upper:]' '[:lower:]' - изменяет все буквы верхнего регистра на нижний.
4. sort - сортирует слова.
5. uniq -c - считает уникальные вхождения.
6. sort -nr - сортирует слова по количеству вхождений.
7. head -n 5 - выводит ТОП-5 результатов.

Результат: Получен список из 5 наиболее часто встречающихся слов в системном логе (конкретные слова зависят от содержимого лога).

Задание Б: Неудачные попытки входа (auth.log)

Цель: Найти TOP-10 IP-адресов с неудачными попытками входа и замаскировать последний октет.

Так как в auth.log небыло неудачных попыток входа и небыло каких либо IP адресов. Я нашел ТОП-5 пользователей с сессиями. Так я потренировал использование команды sed.

Команды для задания:

sed -n 's/.*session opened for user \([^)]*\).*/\1/p' auth.log | sort | uniq -c | sort -nr | head -5

Где: 

1. -n - подавляет автоматический вывод
2. s/.*session opened for user \([^)]*\).*/\1/p - регулярное выражение:
   - .* - любое количество любых символов
   - session opened for user - искомый текст
   - \([^)]*\) - захватывающая группа: любые символы кроме закрывающей скобки
   - .* - остаток строки
   - \1 - подстановка первой захваченной группы (имени пользователя)
   - /p - печать только совпадающих строк
3. sort - сортировка слов
4. uniq -c - подсчет уникальных вхождений
5. sort -nr - сортировка по кличеству
6. head -5 - вывод ТОП-5

Результат: Получен список из 5 пользователей с наибольшим количеством открытых сессий.

Задание В: Установки пакетов (dpkg.log)

Цель: Определить TOP-10 пакетов по количеству установок.

Задание выполнял основываясь на файле dpkg.log.1 .

Команды:

grep " install " /var/log/dpkg.log.1 | awk '{print $5}' | cut -d: -f1 | sort | uniq -c | sort -nr | head -10

Где: 
1. grep " install " - ищет строки с событиями установки
2. awk '{print $5}' - извлекает 5-е поле (название пакета с версией)
3. cut -d: -f1 - удаляет версию пакета, оставляя только имя
4. sort | uniq -c - подсчитывает количество вхождений каждого пакета
5. sort -nr - сортирует по убыванию количества
6. head -10 - показывает только первые 10 результатов

Результат: Получен список из 10 пакетов, которые устанавливались наиболее часто.

Ключевые выводы

1. Анализ логов позволяет выявлять статистические закономерности в работе системы
2. Конвейеры Unix обеспечивают мощный механизм обработки текстовых данных
3. Регулярные выражения существенно расширяют возможности поиска и фильтрации
4. Комбинирование утилит (grep, awk, sed, sort, uniq) позволяет решать сложные задачи анализа

Проверка результатов

1. Все команды тестировались в Ubuntu
2. Результаты визуально проверялись на соответствие ожиданиям
3. Команды выполнялись несколько раз для обеспечения воспроизводимости

Использование ИИ

1. Уточнение синтаксиса регулярных выражений для sed
2. Оптимизация цепочек команд для улучшения производительности
3. Проверка корректности работы команд с различными форматами логов

