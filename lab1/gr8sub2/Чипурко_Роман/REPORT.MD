# Лабораторная работа 1

## Цели
Научиться работе с файлами логов в linux, использовать на практике базовые инструменты для работы с командной строкой.

## Среда выполнения
ОС: Ubuntu
Анализируемые файлы:

- `/var/log/syslog`
- `/var/log/auth.log`
- `/var/log/dpkg.log и /var/log/dpkg.log.*.gz`

### Задание А

В данном задании была изучена, адаптирована и применена приведенная в качестве примера баш-команда, для подсчета 5 самых частых "слов":

```sh
cut -d' ' -f5- /var/log/syslog
    | tr -cs '[:alnum:]' '\n'
    | tr '[:upper:]' '[:lower:]'
    | sort
    | uniq -c
    | sort -nr
    | head -n 5
```

А именно была добавлена команда `-d' '` для разделения полей с помощью пробела, а также команда `-f5-` для того, чтобы выбрать все поля, начиная с 5го. Это было сделано для устранения первых 4х слов, которые представляли собой дату: часы:минуты:секунды:год.

Результат:
```sh
    528 service
    346 gnome
    234 org
    225 d0
    174 of
```

### Задание Б

При выполнении поиска строк с `Failed` или `Invalid` в `/var/log/auth.log` с помощью команды: 
```sh
grep -E 'Failed|Invalid' /var/log/auth.log
```
выдавало строки без IP-адресов. Причина состоит в том, что в моей систем нет нет внешних SSH‑попыток.

Вместо IP было решено подсчитать статусы и подсчитывает количества ошибок по датам соответственно:

Команда:
```sh
grep -E 'Failed|Invalid' /var/log/auth.log
    | awk '{print $5}'
    | sort
    | uniq -c
    | sort -nr
```

Результат:
```sh
2 Failed
```

Команда:
```sh
grep -E 'Failed|Invalid' /var/log/auth.log
    | cut -d'T' -f1
    | sort
    | uniq -c
```

Результат:

```sh
2 2025-09-14
```

### Задание В:

Для подсчета пакетов, которые устанавливались чаще всего был, была использована команда:

```sh
zgrep ' install ' /var/log/dpkg.log.*.gz
    | awk '{print $4}'
    | sort
    | uniq -c
    | sort -nr
    | head -n 10
```

Результат:
```sh
    1 zstd:amd64
    1 zlib1g-dev:amd64
    1 zlib1g:amd64
    1 zip:amd64
    1 zenity-common:all
    1 zenity:amd64
    1 yelp-xsl:all
    1 yelp:amd64
    1 yaru-theme-sound:all
    1 yaru-theme-icon:all
```

Стоит отметить, что для анализа необходимо было учесть не только текущий лог `dpkg.log`, но и его сжатые архивы - `dpkg.log.*.gz`. Поэтому была использована команда `zgrep`, которая подходит для работы как с несжатыми, так и с сжатыми файлами.

## Ключевые выводы

В ходе лабораторной работы усвоены базовые инструменты обработки текста в командной строке и их комбинации через конвейеры. Также был изучен формат некоторых логов.

## Как проверял

Выполнение команд проверялись все в терминале Ubuntu.

## Использование AI

помощью AI использовал для ознакомления с командами и их функционалом, такими как: `cut`, `awk` , `tr` , `zgrep`. 
