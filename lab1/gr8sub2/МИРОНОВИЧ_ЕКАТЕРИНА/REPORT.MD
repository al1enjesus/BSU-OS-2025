# Лабораторная работа 1
## Цели:
Освоить базовые методы обработки текстовой информации в операционной системе Linux с помощью стандартных утилит командной строки и конвейеров на примере анализа системных журналов.
## Среда разработки:
ОС:
ubuntu-24.04.3-live-server-arm64

## Анализируемые файлы:
- `/var/log/syslog` (Задание А)
- `/var/log/auth.log` (Задание Б)
- `/var/log/dpkg.log \u0438 /var/log/dpkg.log.*.gz` (Задание С)

### Задание фА)
Подсчитать 5 самых частых “слов” в /var/log/syslog

### Решение:
Для обработки данных был составлен конвейер из шести последовательных фильтров:

``` 
cat /var/log/syslog 
| tr -cs '[:alnum:]' '\n' 
| tr '[:upper:]' '[:lower:]' 
| sort 
| uniq -c 
| sort -nr 
| head -n 5 
```

  1.  cat /var/log/syslog 
    Выводит содержимое всего файла лога

  2.  tr -cs '[:alnum:]' '\n' 
    Дробит текст: всё, что не буквы/цифры → заменяет на перенос строк

  3.  tr '[:upper:]' '[:lower:]'
    Приводит всё к нижнему регистру

  4.  sort
    Сортирует все получившиеся "слова" по алфавиту

  5.  uniq -c
    Убирает повторы и считает количество каждого слова

  6.  sort -nr
    Сортирует результат по убыванию частоты

  7.  head -n 5
    Оставляет только топ-5 самых частых слов

### Выходной результат задания А):
```
 26332 00
  12687 09
  12588 linux
  12553 2025
  12521 m2
```
### Задание Б)
Найти строки с Failed или Invalid в /var/log/auth.log, извлечь IP‑адреса, посчитать TOP‑10 источников, замаскировать последний октет IP

### Решение:
Найдем неудачные попытки аутентификации:
```
grep -E '(Failed|Invalid)' /var/log/auth.log
```
Результатом стало:
```
2025-09-14T14:55:21.404462+00:00 m2-linux dbus-daemon[816]: [system] Failed to activate service 'org.bluez': timed out (service_start_timeout=25000ms)
2025-09-14T16:47:23.324641+00:00 m2-linux dbus-daemon[813]: [system] Failed to activate service 'org.bluez': timed out (service_start_timeout=25000ms)
2025-09-15T07:54:26.865084+00:00 m2-linux dbus-daemon[807]: [system] Failed to activate service 'org.bluez': timed out (service_start_timeout=25000ms)
```
Данные строки содержат слово Failed, но это не Failed-попытки входа в систему. Это сообщения о том, что не смогла запуститься системная служба org.bluez и поэтому уточним шаблон поиска
```
grep -E '(Failed|Invalid).*(password|user|authentication)' /var/log/auth.log
```
Где мы ищем строки с этими словами (Failed|Invalid). Учитывая любое количество любых символов между частями и обязательно наличие одного из этих слов, характерных именно для попыток входа.
После этого не было получено результата работы терминала, что говорит о том, что нет записей о неудачных попытках входа в систему.

Вместо IP подсчитаем статусы, количество ошибок по датам, а также количеcтво пользователей:
1. Подсчитаем статусы:
```
grep -E '(Failed|Invalid|Error|Timeout)' /var/log/auth.log | awk '{print $5}' | sort | uniq -c | sort -nr
```
Данная команда ищет все строки с ошибками, извлекает 5-е поле (где обычно находится название процесса/сервиса) и считает частоту ошибок по типам.
Результатом стало:
```
 3 Failed
```
2. Считаем количество ошибок по датам:
```
grep -E '(Failed|Invalid|Error|Timeout)' /var/log/auth.log | awk '{print $1}' | sort | uniq -c
```
Команда извлекает даты (первое поле) из строк с ошибками и считает количество ошибок для каждой даты.
Результатом стало:
```
 1 2025-09-14T14:55:21.404462+00:00
      1 2025-09-14T16:47:23.324641+00:00
      1 2025-09-15T07:54:26.865084+00:00
```
3. Найдем количество уникальных пользователей в логе:
```
grep -E 'user|USER' /var/log/auth.log | grep -oE 'user=[a-zA-Z0-9_]+|for [a-zA-Z0-9_]+' | awk -F'[= ]' '{print $NF}' | sort | uniq | wc -l
```
Команда ищет упоминания пользователей, извлекает имена из конструкций "user=username" и "for username" и считает количество уникальных пользователей.
Результатом стало:
```
4
```
4. Общий анализ:
```
grep -E '(Failed|Invalid|Error|Timeout)' /var/log/auth.log | awk '{print $5}' | sort | uniq -c | sort -nr | head -5
grep -E '(Failed|Invalid|Error|Timeout)' /var/log/auth.log | awk '{print $1}' | sort | uniq -c
grep -E 'user|USER' /var/log/auth.log | grep -oE 'user=[a-zA-Z0-9_]+|for [a-zA-Z0-9_]+' | awk -F'[= ]' '{print $NF}' | sort | uniq | wc -l
grep -E '(Failed|Invalid|Error|Timeout)' /var/log/auth.log | tail -5
```
### Выходной результат задания Б)
```
 3 Failed
      1 2025-09-14T14:55:21.404462+00:00
      1 2025-09-14T16:47:23.324641+00:00
      1 2025-09-15T07:54:26.865084+00:00
4
2025-09-14T14:55:21.404462+00:00 m2-linux dbus-daemon[816]: [system] Failed to activate service 'org.bluez': timed out (service_start_timeout=25000ms)
2025-09-14T16:47:23.324641+00:00 m2-linux dbus-daemon[813]: [system] Failed to activate service 'org.bluez': timed out (service_start_timeout=25000ms)
2025-09-15T07:54:26.865084+00:00 m2-linux dbus-daemon[807]: [system] Failed to activate service 'org.bluez': timed out (service_start_timeout=25000ms)

```
### Задание В)
По /var/log/dpkg.log посчитать, какие пакеты устанавливались чаще всего (события install). Вывести TOP‑10 пакетов с количеством установок.

### Решение
1. Найдем события установки:
```
grep " install " /var/log/dpkg.log
```
Здесь мы ищем все строки, содержащие слово " install " (с пробелами по бокам). Это отфильтрует только операции установки пакетов

2. Извлекаем названия пакетов
```
awk '{print $5}'
```
В dpkg.log название пакета находится в 5-м поле

3. Считаем и сортируем
```
sort | uniq -c | sort -nr | head -n 10
```
   3.1 sort — сортируем названия пакетов по алфавиту
   3.2 uniq -c — подсчитываем количество каждой уникальной записи
   3.3 sort -nr — сортируем по убыванию количества
   3.4 head -n 10 — берем топ-10 результатов

4. Итоговая команда:
```
grep " install " /var/log/dpkg.log | awk '{print $5}' | sort | uniq -c | sort -nr | head -n 10
```

### Выходной результат задания В)
```
  1709 <none>
```
## Ключевые выводы
В ходе лабораторной работы были усвоены базовые инструменты обработки текста в командной строке и их комбинации через конвейеры. Также был изучен формат и структура системных логов.

## Как проверяла

Выполнение команд проверялись в терминале Ubuntu.

## Использование AI

С помощью AI я ознакомилась с командами и их функционалом, такими как: `cut`, `awk` , `tr` , `zgrep`. 


