# Отчёт по анализу лог-файлов в Linux

## Цель работы
Научиться работать с файлами логов в Linux с использованием базовых инструментов командной строки.


## А) Частотный анализ слов в syslog (TOP‑5)

### Цель
Выявить 5 наиболее часто встречающихся слов в системном логе с учетом нормализации регистра и корректного разделения текста на отдельные слова.

### Шаги выполнения
1. Читаем и выводим содержимое системного журнала `/var/log/syslog`. Используем sudо, потому что доступ к логам ограничен.
2. Разбиваем текст на отдельные "слова", по одному на строку.
3. Преобразуем все заглавные буквы в строчные.
4. Сортируем слова по алфавиту.
5. Подсчитываем количество повторений каждого уникального слова.
6. Сортируем строки от самых частых к редким.
7. Выводим первые 5 результатов, т.е. самых частых слов.

### Код
```bash
sudo cat /var/log/syslog \
  | tr -cs '[:alnum:]' '\n' \
  | tr '[:upper:]' '[:lower:]' \
  | sort \
  | uniq -c \
  | sort -nr \
  | head -n 5
```

### Результат
```
  58704 00
  32150 09
  28238 2025
  26481 ubuntu
  11342 systemd
```

### Ключевые выводы
- Наиболее частыми "словами" являются цифровые значения ("00", "09", "2025").
- Системные компоненты ("ubuntu", "systemd") также входят в топ-5.
- Преобладание цифровых значений. Лог содержит много временных меток и числовых данных, скорее всего из-за недавней установки системы.

## Б) Неудачные попытки входа (auth.log)

### Цель
Проанализировать журнал аутентификации /var/log/auth.log для выявления локальных попыток входа в систему, классификации пользователей и оценки статуса доступа.

### Шаги выполнения
1. Анализ типов аутентификации и сервисов.
2. Исследование несуществующих пользователей.
3. Анализ пользователей с неудачными попытками входа.
4. Изучение успешных входов в систему.
5. Расчёт статистики успехов и провалов аутентификации.
6. Проверка внешних SSH-подключений.

### Код
```bash
# Полный код представлен в задании
# Основные элементы:
sudo grep -a '' /var/log/auth.log 2>/dev/null | awk '{print $5}'  # типы аутентификации
sudo grep -a "Invalid user" /var/log/auth.log 2>/dev/null | awk '{print $8}'  # несуществующие пользователи
sudo grep -a "Failed password" /var/log/auth.log 2>/dev/null | awk '{...}'  # неудачные попытки
```

### Результат
Анализ показал, что в системе отсутствуют записи о внешних SSH-подключениях и атаках подбора паролей. 

### Ключевые выводы
- Внешние подключения по SSH отсутствуют.
- Все попытки аутентификации являются локальными.
- Преобладают успешные аутентификации через gdm-password.

## В) Установки пакетов (dpkg.log)

### Цель
Определить и вывести TOP-10 наиболее часто устанавливаемых пакетов в системе.

### Шаги выполнения
1. Поиск событий установки в логе dpkg
2. Извлечение имён пакетов из записей
3. Подсчёт количества установок для каждого пакета
4. Сортировка по убыванию частоты установок
5. Вывод первых 10 результатов

### Код
```bash
sudo grep 'install' /var/log/dpkg.log \
  | awk '{print $5}' \
  | cut -d: -f1 \
  | sort \
  | uniq -c \
  | sort -nr \
  | head -n 10
```

### Результат
```
   1628 <none>
     13 libc-bin
     13 install
      8 man-db
      6 linux-image-6.14.0-15-generic
      6 libglib2.0-0t64
      5 systemd
      5 sgml-base
      5 procps
      5 language-pack-zh-hans-base
```

### Ключевые выводы
- Большинство записей (1628) относятся к операциям без указания конкретного пакета ("<none>").
- Системные пакеты (libc-bin, systemd, man-db) устанавливаются наиболее часто.

## Ответы на вопросы
## Запуск
```bash
gedit script.sh
sh script.sh
```

### Как проверяли
- Использовали командную строку Linux (Ubuntu).
- Применяли базовые инструменты: grep, awk, sort, uniq, cut.
- Для доступа к системным логам использовали sudo.

### Как использовали AI
- AI помог разобраться с ключевыми командами.
- Помог быстрее проанализировать мои результаты.

## Общие выводы
1. Отсутствуют следы внешних атак подбора паролей.
2. Установочные операции в системе преимущественно связаны с системными пакетами, потому что использовать Linux я стала недавно.
3. Инструменты командной строки предоставляют мощные возможности для анализа логов.
4. Для корректной работы с системными логами необходимы права sudo.
