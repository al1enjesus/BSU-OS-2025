Лабараторная работа 1 - Анализ логов (Bash)

Цель работы:
Познакомиться с базовыми инструментами Linux для анализа логов, научиться использовать конвейеры команд, фильтрацию, агрегацию и простейший парсинг текстов с помощью утилит grep, awk, sed, sort

	А) Частотный анализ логов в syslog ( заменен на dmesg.txt)
Цель:  Определить наиболее часто  встречающиеся слова в системных логах, используя базовые инструменты в Linux.

	Шаги выполнения:
Так как у меня отсутствует файл '/var/log/syslog',  я сохранил вывод ''dmesg' в файл:
	mkdir -p lab1/gr9sub2/ГорбачМК/logs
	dmesg --ctime > lab1/gr9sub2/ГорбачМК/logs/dmesg.txt
Для анализа слов применил конвейер из примера:
	cat lab1/gr9sub2/ГорбачМК/logs/dmesg.txt \
  | tr -cs '[:alnum:]' '\n' \
  | tr '[:upper:]' '[:lower:]' \
  | sort \
  | uniq -c \
  | sort -nr \
  | head -n 5

Результат:
	3190 14
	2918 01
	1984 x11
	1595 sun
	1595 sep

Вывод:
	Наиболее часто встречающиеся слова - это системные ключевые слова.



	B) Неудачные попытки входа
Цель: Выявить IP-адреса источников неудачных попыток входа (Failed/Invalid) и подсчитать TOP-10, замаскировав последний октет.

	Шаги выполнения:
/var/log/auth.log 
Вместо '/var/log/auth.log' использовал journalctl для получения логов SSH:
sudo journalctl -u ssh.service --since "30 days ago" --no-pager > lab1/gr6sub1/ФАМИЛИЯ_ИМЯ/logs/auth.txt

Далее запустил поиск неудачных входов:
grep -E "Failed|Invalid" lab1/gr6sub1/ФАМИЛИЯ_ИМЯ/logs/auth.txt \
  | grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}' \
  | sed -E 's/([0-9]+\.[0-9]+\.[0-9]+\.)[0-9]+/\1x/g' \
  | sort | uniq -c | sort -nr | head -n 10

Результат: (пустой вывод)

Вывод:	В моей системе не зафиксировано неудачных попыток входа за последние 30 дней, поэтому список TOP-10 пуст. Это объясняется тем, что сервис SSH либо не был запущен, либо не подвергался атакам/попыткам входа.






	C) Установки пакетов (dpkg.log)

Цель:
Найти пакеты, которые устанавливались чаще всего.

Команда:
zgrep -h " install " /var/log/dpkg.log* 2>/dev/null \
  | awk '{print $4}' \
  | sed -E 's/:.*$//' \
  | sort \
  | uniq -c \
  | sort -nr \
  | head -n 10

Результат:
	  1 zstd
      1 zsh-syntax-highlighting
      1 zsh-common
      1 zsh-autosuggestions
      1 zsh
      1 zlib1g-dev
      1 zlib1g
      1 ziptool
      1 zipmerge
      1 zipcmp


Вывод:
В моей системе каждый пакет из TOP-10 встречается только один раз.
Это означает, что журнал установок dpkg зафиксировал относительно мало установок, и нет пакетов, которые явно выделялись бы по количеству.

Что было сложным:
 отсутствие некоторых стандартных файлов (syslog, auth.log), пришлось использовать dmesg и journalctl.

Как использовал AI:
 помогал с построением конвейеров, заменой отсутствующих файлов
