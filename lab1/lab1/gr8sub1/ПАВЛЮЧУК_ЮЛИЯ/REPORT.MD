# Лабораторная 1 — Bash: анализ логов

Короткая практика по работе с файлами логов в Linux с использованием базовых инструментов командной строки.

## Цель:

Произвести базовый анализ системных логов Linux с использованием стандартных команд командной строки Bash для выявления ключевых закономерностей: определить наиболее часто встречающиеся слова в системных логах, выявить основные источники неудачных попыток входа в систему и проанализировать статистику установок пакетов.

## Среда выполнения:

ОС:Ubuntu
  - `/var/log/syslog`
  - `/var/log/auth.log`
  - `/var/log/dpkg.log`
  
## Задание А:
Частотный анализ слов в syslog
 - `Подсчитайте 5 самых частых “слов” в /var/log/syslog`
##Решение
 
 В исходном варианте анализа часто в топ попадали значения времени (00, 09, 2025), потому что каждая строка лога начинается с даты.
Чтобы этого избежать, была добавлена конструкция cut -d' ' -f5-, которая удаляет поля даты и оставляет только содержательную часть сообщений.Заменила [:alnum:] на [:alpha:] , чтобы оставить только слова

Команда:
```bash
cut -d' ' -f5- /var/log/syslog \
  | tr -cs '[:alpha:]' '\n' \
  | tr '[:upper:]' '[:lower:]' \
  | sort \
  | uniq -c \
  | sort -nr \
  | head -n 5
```
Вывод команды:
```bash
   5993 service
   4300 keysym
   4269 of
   3027 gnome
   2639 manager
```
##Вывод: 
Мы получили результат, который ожидали.

## Задание Б:
Неудачные попытки входа (auth.log)
- Найдите строки с `Failed` или `Invalid` в `/var/log/auth.log`.
- Извлеките IP‑адреса, посчитайте TOP‑10 источников. 
- Замаскируйте последний октет IP 

##Решение
Ищем все строки, где встречаются слова Failed или Invalid:
Команда:
```bash
sudo grep -aEi 'Failed|Invalid' /var/log/auth.log \
  | grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}' \
  | sed -E 's/([0-9]+\.[0-9]+\.[0-9]+\.)[0-9]+/\1x/' \
  | sort \
  | uniq -c \
  | sort -nr \
  | head -n 10


```
Команда была выполнена, но в моём auth.log нет записей о неудачных попытках входа по SSH.

Вместо IP-адресов выводятся сообщения об ошибках запуска сервисов (например, dbus-daemon, org.bluez, fwupd).

На моей системе в данный период времени атак на SSH или неправильных логинов не было.

## Задание В:
 Установки пакетов (dpkg.log)
- По `/var/log/dpkg.log` посчитайте, какие пакеты устанавливались чаще всего (события `install`).
- Выведите TOP‑10 пакетов с количеством установок.
##Решение

Команда:
```bash
grep ' install ' /var/log/dpkg.log \
  | awk '{print $4}' \
  | sort \
  | uniq -c \
  | sort -nr \
  | head -n 10


```
Вывод команды:
```bash
      1 zstd:amd64
      1 zlib1g:amd64
      1 zip:amd64
      1 zenity-common:all
      1 zenity:amd64
      1 yelp-xsl:all
      1 yelp:amd64
      1 yaru-theme-sound:all
      1 yaru-theme-icon:all
      1 yaru-theme-gtk:all

```
Я подсчитала наиболее часто устанавливаемые пакеты за период, охватываемый текущим логом.

Результаты показывают, что каждый из перечисленных пакетов был установлен один раз за период записи лога
