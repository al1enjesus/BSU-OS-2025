<svg xmlns="http://www.w3.org/2000/svg" width="900" height="520" viewBox="0 0 900 520">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#2d2d2d" />
    </marker>
    <style>
      .box { fill: #f8fafc; stroke: #94a3b8; stroke-width: 1.5; rx: 8; ry: 8; }
      .threadbox { fill: #f1f5f9; stroke: #cbd5e1; stroke-width: 1.2; rx: 6; ry: 6; }
      .title { font-family: sans-serif; font-size: 16px; font-weight: 700; fill: #0f172a; }
      .label { font-family: sans-serif; font-size: 14px; fill: #0f172a; }
      .small { font-family: sans-serif; font-size: 12px; fill: #334155; }
      .legend { font-family: sans-serif; font-size: 13px; fill: #334155; }
      .arrow { stroke: #2d2d2d; stroke-width: 1.5; fill: none; marker-end: url(#arrow); }
      .dashed { stroke-dasharray: 5 5; }
    </style>
  </defs>

  <!-- Title -->
  <text x="24" y="32" class="title">Модель процессов и потоков в Linux</text>
  <text x="24" y="52" class="small">Сплошная стрелка — родитель → потомок (fork). Пунктир — связи внутри процесса (потоки).</text>

  <!-- PID 1 (init/systemd) -->
  <rect x="380" y="70" width="160" height="48" class="box"/>
  <text x="395" y="98" class="label">PID 1: systemd/init</text>

  <!-- Parent (e.g., bash) -->
  <rect x="350" y="160" width="220" height="64" class="box"/>
  <text x="365" y="186" class="label">Родительский процесс</text>
  <text x="365" y="206" class="small">пример: bash, PPID=1</text>

  <!-- Arrow PID1 -> parent -->
  <line x1="460" y1="118" x2="460" y2="160" class="arrow" />

  <!-- Children -->
  <rect x="220" y="280" width="200" height="60" class="box"/>
  <text x="235" y="308" class="label">Дочерний процесс A</text>
  <text x="235" y="328" class="small">PID=X, PPID=родитель</text>

  <rect x="520" y="280" width="200" height="60" class="box"/>
  <text x="535" y="308" class="label">Дочерний процесс B</text>
  <text x="535" y="328" class="small">PID=Y, PPID=родитель</text>

  <!-- Arrows parent -> children -->
  <line x1="420" y1="224" x2="320" y2="280" class="arrow" />
  <line x1="500" y1="224" x2="620" y2="280" class="arrow" />

  <!-- Threads panel -->
  <rect x="100" y="120" width="180" height="180" class="threadbox" />
  <text x="110" y="144" class="label">Процесс с потоками</text>
  <text x="110" y="164" class="small">один PID, несколько TID</text>
  <!-- Thread circles -->
  <circle cx="150" cy="200" r="18" fill="#e2e8f0" stroke="#94a3b8"/>
  <text x="140" y="204" class="small">T1</text>
  <circle cx="200" cy="200" r="18" fill="#e2e8f0" stroke="#94a3b8"/>
  <text x="190" y="204" class="small">T2</text>
  <circle cx="175" cy="245" r="18" fill="#e2e8f0" stroke="#94a3b8"/>
  <text x="165" y="249" class="small">T3</text>
  <!-- Dashed internal connections -->
  <line x1="150" y1="200" x2="200" y2="200" class="arrow dashed" />
  <line x1="175" y1="245" x2="200" y2="200" class="arrow dashed" />

  <!-- Legend -->
  <rect x="24" y="420" width="852" height="78" class="threadbox" />
  <text x="36" y="446" class="legend">Легенда:</text>
  <line x1="120" y1="440" x2="170" y2="440" class="arrow" />
  <text x="178" y="446" class="legend">fork: родитель создаёт новый процесс (дочерний получает новый PID)</text>
  <line x1="120" y1="466" x2="170" y2="466" class="arrow dashed" />
  <text x="178" y="472" class="legend">потоки внутри процесса: общий адресное пространство, TID, общий PID при учёте группы</text>

  <!-- Notes -->
  <text x="580" y="160" class="small">После fork() родитель обычно вызывает wait()/waitpid()</text>
  <text x="580" y="176" class="small">exec() заменяет код процесса новым образом программы</text>
</svg>


